var t={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,r,e,i,o){var n,s,a=8*o-i-1,u=(1<<a)-1,h=u>>1,f=-7,c=e?o-1:0,y=e?-1:1,p=t[r+c];for(c+=y,n=p&(1<<-f)-1,p>>=-f,f+=a;f>0;n=256*n+t[r+c],c+=y,f-=8);for(s=n&(1<<-f)-1,n>>=-f,f+=i;f>0;s=256*s+t[r+c],c+=y,f-=8);if(0===n)n=1-h;else{if(n===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),n-=h}return(p?-1:1)*s*Math.pow(2,n-i)},write:function(t,r,e,i,o,n){var s,a,u,h=8*n-o-1,f=(1<<h)-1,c=f>>1,y=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:n-1,l=i?1:-1,_=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,s=f):(s=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-s))<1&&(s--,u*=2),(r+=s+c>=1?y/u:y*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=f?(a=0,s=f):s+c>=1?(a=(r*u-1)*Math.pow(2,o),s+=c):(a=r*Math.pow(2,c-1)*Math.pow(2,o),s=0));o>=8;t[e+p]=255&a,p+=l,a/=256,o-=8);for(s=s<<o|a,h+=o;h>0;t[e+p]=255&s,p+=l,s/=256,h-=8);t[e+p-l]|=128*_}},r=i,e=t;function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function n(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,r,e){return e?4294967296*r+(t>>>0):4294967296*(r>>>0)+(t>>>0)}function a(t,r,e){var i=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));e.realloc(i);for(var o=e.pos-1;o>=t;o--)e.buf[o+i]=e.buf[o]}function u(t,r){for(var e=0;e<t.length;e++)r.writeVarint(t[e])}function h(t,r){for(var e=0;e<t.length;e++)r.writeSVarint(t[e])}function f(t,r){for(var e=0;e<t.length;e++)r.writeFloat(t[e])}function c(t,r){for(var e=0;e<t.length;e++)r.writeDouble(t[e])}function y(t,r){for(var e=0;e<t.length;e++)r.writeBoolean(t[e])}function p(t,r){for(var e=0;e<t.length;e++)r.writeFixed32(t[e])}function l(t,r){for(var e=0;e<t.length;e++)r.writeSFixed32(t[e])}function _(t,r){for(var e=0;e<t.length;e++)r.writeFixed64(t[e])}function x(t,r){for(var e=0;e<t.length;e++)r.writeSFixed64(t[e])}function d(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16)+16777216*t[r+3]}function m(t,r,e){t[e]=r,t[e+1]=r>>>8,t[e+2]=r>>>16,t[e+3]=r>>>24}function v(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16)+(t[r+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,r,e){for(e=e||this.length;this.pos<e;){var i=this.readVarint(),o=i>>3,n=this.pos;this.type=7&i,t(o,r,this),this.pos===n&&this.skip(i)}return r},readMessage:function(t,r){return this.readFields(t,r,this.readVarint()+this.pos)},readFixed32:function(){var t=d(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=d(this.buf,this.pos)+4294967296*d(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=d(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=e.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=e.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var r,e,i=this.buf;return r=127&(e=i[this.pos++]),e<128?r:(r|=(127&(e=i[this.pos++]))<<7,e<128?r:(r|=(127&(e=i[this.pos++]))<<14,e<128?r:(r|=(127&(e=i[this.pos++]))<<21,e<128?r:function(t,r,e){var i,o,n=e.buf;if(o=n[e.pos++],i=(112&o)>>4,o<128)return s(t,i,r);if(o=n[e.pos++],i|=(127&o)<<3,o<128)return s(t,i,r);if(o=n[e.pos++],i|=(127&o)<<10,o<128)return s(t,i,r);if(o=n[e.pos++],i|=(127&o)<<17,o<128)return s(t,i,r);if(o=n[e.pos++],i|=(127&o)<<24,o<128)return s(t,i,r);if(o=n[e.pos++],i|=(1&o)<<31,o<128)return s(t,i,r);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(e=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,r=this.pos;return this.pos=t,t-r>=12&&o?function(t,r,e){return o.decode(t.subarray(r,e))}(this.buf,r,t):function(t,r,e){var i="",o=r;for(;o<e;){var n,s,a,u=t[o],h=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f>e)break;1===f?u<128&&(h=u):2===f?128==(192&(n=t[o+1]))&&(h=(31&u)<<6|63&n)<=127&&(h=null):3===f?(n=t[o+1],s=t[o+2],128==(192&n)&&128==(192&s)&&((h=(15&u)<<12|(63&n)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===f&&(n=t[o+1],s=t[o+2],a=t[o+3],128==(192&n)&&128==(192&s)&&128==(192&a)&&((h=(15&u)<<18|(63&n)<<12|(63&s)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,f=1):h>65535&&(h-=65536,i+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),i+=String.fromCharCode(h),o+=f}return i}(this.buf,r,t)},readBytes:function(){var t=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,t);return this.pos=t,r},readPackedVarint:function(t,r){if(this.type!==i.Bytes)return t.push(this.readVarint(r));var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readVarint(r));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var r=n(this);for(t=t||[];this.pos<r;)t.push(this.readSFixed64());return t},skip:function(t){var r=7&t;if(r===i.Varint)for(;this.buf[this.pos++]>127;);else if(r===i.Bytes)this.pos=this.readVarint()+this.pos;else if(r===i.Fixed32)this.pos+=4;else{if(r!==i.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(t,r){this.writeVarint(t<<3|r)},realloc:function(t){for(var r=this.length||16;r<this.pos+t;)r*=2;if(r!==this.length){var e=new Uint8Array(r);e.set(this.buf),this.buf=e,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(2.3283064365386963e-10*t),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(2.3283064365386963e-10*t),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,r){var e,i;t>=0?(e=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,i=i+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(t,r,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(e,0,r),function(t,r){var e=(7&t)<<4;if(r.buf[r.pos++]|=e|((t>>>=3)?128:0),!t)return;if(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(r.buf[r.pos++]=127&t|((t>>>=7)?128:0),!t)return;r.buf[r.pos++]=127&t}(i,r)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var r=this.pos;this.pos=function(t,r,e){for(var i,o,n=0;n<r.length;n++){if((i=r.charCodeAt(n))>55295&&i<57344){if(!o){i>56319||n+1===r.length?(t[e++]=239,t[e++]=191,t[e++]=189):o=i;continue}if(i<56320){t[e++]=239,t[e++]=191,t[e++]=189,o=i;continue}i=o-55296<<10|i-56320|65536,o=null}else o&&(t[e++]=239,t[e++]=191,t[e++]=189,o=null);i<128?t[e++]=i:(i<2048?t[e++]=i>>6|192:(i<65536?t[e++]=i>>12|224:(t[e++]=i>>18|240,t[e++]=i>>12&63|128),t[e++]=i>>6&63|128),t[e++]=63&i|128)}return e}(this.buf,t,this.pos);var e=this.pos-r;e>=128&&a(r,e,this),this.pos=r-1,this.writeVarint(e),this.pos+=e},writeFloat:function(t){this.realloc(4),e.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),e.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var r=t.length;this.writeVarint(r),this.realloc(r);for(var e=0;e<r;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,r){this.pos++;var e=this.pos;t(r,this);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,r,e){this.writeTag(t,i.Bytes),this.writeRawMessage(r,e)},writePackedVarint:function(t,r){r.length&&this.writeMessage(t,u,r)},writePackedSVarint:function(t,r){r.length&&this.writeMessage(t,h,r)},writePackedBoolean:function(t,r){r.length&&this.writeMessage(t,y,r)},writePackedFloat:function(t,r){r.length&&this.writeMessage(t,f,r)},writePackedDouble:function(t,r){r.length&&this.writeMessage(t,c,r)},writePackedFixed32:function(t,r){r.length&&this.writeMessage(t,p,r)},writePackedSFixed32:function(t,r){r.length&&this.writeMessage(t,l,r)},writePackedFixed64:function(t,r){r.length&&this.writeMessage(t,_,r)},writePackedSFixed64:function(t,r){r.length&&this.writeMessage(t,x,r)},writeBytesField:function(t,r){this.writeTag(t,i.Bytes),this.writeBytes(r)},writeFixed32Field:function(t,r){this.writeTag(t,i.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(t,r){this.writeTag(t,i.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(t,r){this.writeTag(t,i.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(t,r){this.writeTag(t,i.Fixed64),this.writeSFixed64(r)},writeVarintField:function(t,r){this.writeTag(t,i.Varint),this.writeVarint(r)},writeSVarintField:function(t,r){this.writeTag(t,i.Varint),this.writeSVarint(r)},writeStringField:function(t,r){this.writeTag(t,i.Bytes),this.writeString(r)},writeFloatField:function(t,r){this.writeTag(t,i.Fixed32),this.writeFloat(r)},writeDoubleField:function(t,r){this.writeTag(t,i.Fixed64),this.writeDouble(r)},writeBooleanField:function(t,r){this.writeVarintField(t,Boolean(r))}};var w=R;function R(t,r){this.x=t,this.y=r}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,r){return this.clone()._rotateAround(t,r)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var r=t.x-this.x,e=t.y-this.y;return r*r+e*e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,r){return Math.atan2(this.x*r-this.y*t,this.x*t+this.y*r)},_matMult:function(t){var r=t[0]*this.x+t[1]*this.y,e=t[2]*this.x+t[3]*this.y;return this.x=r,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var r=Math.cos(t),e=Math.sin(t),i=r*this.x-e*this.y,o=e*this.x+r*this.y;return this.x=i,this.y=o,this},_rotateAround:function(t,r){var e=Math.cos(t),i=Math.sin(t),o=r.x+e*(this.x-r.x)-i*(this.y-r.y),n=r.y+i*(this.x-r.x)+e*(this.y-r.y);return this.x=o,this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},R.convert=function(t){return t instanceof R?t:Array.isArray(t)?new R(t[0],t[1]):t};var z=w,T=F;function F(t,r,e,i,o){this.properties={},this.extent=e,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(g,this,r)}function g(t,r,e){1==t?r.id=e.readVarint():2==t?function(t,r){var e=t.readVarint()+t.pos;for(;t.pos<e;){var i=r._keys[t.readVarint()],o=r._values[t.readVarint()];r.properties[i]=o}}(e,r):3==t?r.type=e.readVarint():4==t&&(r._geometry=e.pos)}function M(t){for(var r,e,i=0,o=0,n=t.length,s=n-1;o<n;s=o++)r=t[o],i+=((e=t[s]).x-r.x)*(r.y+e.y);return i}F.types=["Unknown","Point","LineString","Polygon"],F.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var r,e=t.readVarint()+t.pos,i=1,o=0,n=0,s=0,a=[];t.pos<e;){if(o<=0){var u=t.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)n+=t.readSVarint(),s+=t.readSVarint(),1===i&&(r&&a.push(r),r=[]),r.push(new z(n,s));else{if(7!==i)throw new Error("unknown command "+i);r&&r.push(r[0].clone())}}return r&&a.push(r),a},F.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var r=t.readVarint()+t.pos,e=1,i=0,o=0,n=0,s=1/0,a=-1/0,u=1/0,h=-1/0;t.pos<r;){if(i<=0){var f=t.readVarint();e=7&f,i=f>>3}if(i--,1===e||2===e)(o+=t.readSVarint())<s&&(s=o),o>a&&(a=o),(n+=t.readSVarint())<u&&(u=n),n>h&&(h=n);else if(7!==e)throw new Error("unknown command "+e)}return[s,u,a,h]},F.prototype.toGeoJSON=function(t,r,e){var i,o,n=this.extent*Math.pow(2,e),s=this.extent*t,a=this.extent*r,u=this.loadGeometry(),h=F.types[this.type];function f(t){for(var r=0;r<t.length;r++){var e=t[r],i=180-360*(e.y+a)/n;t[r]=[360*(e.x+s)/n-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(i=0;i<u.length;i++)c[i]=u[i][0];f(u=c);break;case 2:for(i=0;i<u.length;i++)f(u[i]);break;case 3:for(u=function(t){var r=t.length;if(r<=1)return[t];for(var e,i,o=[],n=0;n<r;n++){var s=M(t[n]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(e&&o.push(e),e=[t[n]]):e.push(t[n]))}e&&o.push(e);return o}(u),i=0;i<u.length;i++)for(o=0;o<u[i].length;o++)f(u[i][o])}1===u.length?u=u[0]:h="Multi"+h;var y={type:"Feature",geometry:{type:h,coordinates:u},properties:this.properties};return"id"in this&&(y.id=this.id),y};var b=T,I=P;function P(t,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(V,this,r),this.length=this._features.length}function V(t,r,e){15===t?r.version=e.readVarint():1===t?r.name=e.readString():5===t?r.extent=e.readVarint():2===t?r._features.push(e.pos):3===t?r._keys.push(e.readString()):4===t&&r._values.push(function(t){var r=null,e=t.readVarint()+t.pos;for(;t.pos<e;){var i=t.readVarint()>>3;r=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return r}(e))}P.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var r=this._pbf.readVarint()+this._pbf.pos;return new b(this._pbf,r,this.extent,this._keys,this._values)};var A=I,D=function(t,r){this.layers=t.readFields(S,{},r)};function S(t,r,e){if(3===t){var i=new A(e,e.readVarint()+e.pos);i.length&&(r[i.name]=i)}}var C=D,k=function(){function t(){}return t.WithinEpsilon=function(t,r,e){return void 0===e&&(e=1401298e-51),Math.abs(t-r)<=e},t.ToHex=function(t){var r=t.toString(16);return t<=15?("0"+r).toUpperCase():r.toUpperCase()},t.Sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},t.Clamp=function(t,r,e){return void 0===r&&(r=0),void 0===e&&(e=1),Math.min(e,Math.max(r,t))},t.Log2=function(t){return Math.log(t)*Math.LOG2E},t.ILog2=function(t){if(Math.log2)return Math.floor(Math.log2(t));if(t<0)return NaN;if(0===t)return-1/0;var r=0;if(t<1){for(;t<1;)r++,t*=2;r=-r}else if(t>1)for(;t>1;)r++,t=Math.floor(t/2);return r},t.Repeat=function(t,r){return t-Math.floor(t/r)*r},t.Normalize=function(t,r,e){return(t-r)/(e-r)},t.Denormalize=function(t,r,e){return t*(e-r)+r},t.DeltaAngle=function(r,e){var i=t.Repeat(e-r,360);return i>180&&(i-=360),i},t.PingPong=function(r,e){var i=t.Repeat(r,2*e);return e-Math.abs(i-e)},t.SmoothStep=function(r,e,i){var o=t.Clamp(i);return e*(o=-2*o*o*o+3*o*o)+r*(1-o)},t.MoveTowards=function(r,e,i){return Math.abs(e-r)<=i?e:r+t.Sign(e-r)*i},t.MoveTowardsAngle=function(r,e,i){var o=t.DeltaAngle(r,e),n=0;return-i<o&&o<i?n=e:(e=r+o,n=t.MoveTowards(r,e,i)),n},t.Lerp=function(t,r,e){return t+(r-t)*e},t.LerpAngle=function(r,e,i){var o=t.Repeat(e-r,360);return o>180&&(o-=360),r+o*t.Clamp(i)},t.InverseLerp=function(r,e,i){return r!=e?t.Clamp((i-r)/(e-r)):0},t.Hermite=function(t,r,e,i,o){var n=o*o,s=o*n;return t*(2*s-3*n+1)+e*(-2*s+3*n)+r*(s-2*n+o)+i*(s-n)},t.Hermite1stDerivative=function(t,r,e,i,o){var n=o*o;return 6*(n-o)*t+(3*n-4*o+1)*r+6*(-n+o)*e+(3*n-2*o)*i},t.RandomRange=function(t,r){return t===r?t:Math.random()*(r-t)+t},t.RangeToPercent=function(t,r,e){return(t-r)/(e-r)},t.PercentToRange=function(t,r,e){return(e-r)*t+r},t.NormalizeRadians=function(r){return r-=t.TwoPi*Math.floor((r+Math.PI)/t.TwoPi)},t.HCF=function(r,e){var i=r%e;return 0===i?e:t.HCF(e,i)},t.TwoPi=2*Math.PI,t}(),L=function(){function t(){}return t.BuildArray=function(t,r){for(var e=[],i=0;i<t;++i)e.push(r());return e},t.BuildTuple=function(r,e){return t.BuildArray(r,e)},t}(),B=function(){function t(){}return t.SetMatrixPrecision=function(r){if(t.MatrixTrackPrecisionChange=!1,r&&!t.MatrixUse64Bits&&t.MatrixTrackedMatrices)for(var e=0;e<t.MatrixTrackedMatrices.length;++e){var i=t.MatrixTrackedMatrices[e],o=i._m;i._m=new Array(16);for(var n=0;n<16;++n)i._m[n]=o[n]}t.MatrixUse64Bits=r,t.MatrixCurrentType=t.MatrixUse64Bits?Array:Float32Array,t.MatrixTrackedMatrices=null},t.MatrixUse64Bits=!1,t.MatrixTrackPrecisionChange=!0,t.MatrixCurrentType=Float32Array,t.MatrixTrackedMatrices=[],t}(),O=function(){function t(){}return Object.defineProperty(t,"LastCreatedEngine",{get:function(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LastCreatedScene",{get:function(){return this._LastCreatedScene},enumerable:!1,configurable:!0}),t.Instances=new Array,t._LastCreatedScene=null,t.UseFallbackTexture=!0,t.FallbackTexture="",t}(),H=function(t){return parseInt(t.toString().replace(/\W/g,""))},U=function(){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.x=t,this.y=r}return t.prototype.toString=function(){return"{X: ".concat(this.x," Y: ").concat(this.y,"}")},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){var t=H(this.x);return t=397*t^H(this.y)},t.prototype.toArray=function(t,r){return void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,this},t.prototype.fromArray=function(r,e){return void 0===e&&(e=0),t.FromArrayToRef(r,e,this),this},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.copyFromFloats=function(t,r){return this.x=t,this.y=r,this},t.prototype.set=function(t,r){return this.copyFromFloats(t,r)},t.prototype.add=function(r){return new t(this.x+r.x,this.y+r.y)},t.prototype.addToRef=function(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,this},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addVector3=function(r){return new t(this.x+r.x,this.y+r.y)},t.prototype.subtract=function(r){return new t(this.x-r.x,this.y-r.y)},t.prototype.subtractToRef=function(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,this},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiply=function(r){return new t(this.x*r.x,this.y*r.y)},t.prototype.multiplyToRef=function(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,this},t.prototype.multiplyByFloats=function(r,e){return new t(this.x*r,this.y*e)},t.prototype.divide=function(r){return new t(this.x/r.x,this.y/r.y)},t.prototype.divideToRef=function(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,this},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this},t.prototype.negateToRef=function(t){return t.copyFromFloats(-1*this.x,-1*this.y)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},t.prototype.scale=function(r){var e=new t(0,0);return this.scaleToRef(r,e),e},t.prototype.scaleToRef=function(t,r){return r.x=this.x*t,r.y=this.y*t,this},t.prototype.scaleAndAddToRef=function(t,r){return r.x+=this.x*t,r.y+=this.y*t,this},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},t.prototype.equalsWithEpsilon=function(t,r){return void 0===r&&(r=.001),t&&k.WithinEpsilon(this.x,t.x,r)&&k.WithinEpsilon(this.y,t.y,r)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.rotateToRef=function(t,r){var e=Math.cos(t),i=Math.sin(t);return r.x=e*this.x-i*this.y,r.y=i*this.x+e*this.y,this},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){return t.NormalizeToRef(this,this),this},t.prototype.clone=function(){return new t(this.x,this.y)},t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.FromArray=function(r,e){return void 0===e&&(e=0),new t(r[e],r[e+1])},t.FromArrayToRef=function(t,r,e){e.x=t[r],e.y=t[r+1]},t.CatmullRom=function(r,e,i,o,n){var s=n*n,a=n*s;return new t(.5*(2*e.x+(-r.x+i.x)*n+(2*r.x-5*e.x+4*i.x-o.x)*s+(-r.x+3*e.x-3*i.x+o.x)*a),.5*(2*e.y+(-r.y+i.y)*n+(2*r.y-5*e.y+4*i.y-o.y)*s+(-r.y+3*e.y-3*i.y+o.y)*a))},t.Clamp=function(r,e,i){var o=r.x;o=(o=o>i.x?i.x:o)<e.x?e.x:o;var n=r.y;return new t(o,n=(n=n>i.y?i.y:n)<e.y?e.y:n)},t.Hermite=function(r,e,i,o,n){var s=n*n,a=n*s,u=2*a-3*s+1,h=-2*a+3*s,f=a-2*s+n,c=a-s;return new t(r.x*u+i.x*h+e.x*f+o.x*c,r.y*u+i.y*h+e.y*f+o.y*c)},t.Hermite1stDerivative=function(r,e,i,o,n){var s=t.Zero();return this.Hermite1stDerivativeToRef(r,e,i,o,n,s),s},t.Hermite1stDerivativeToRef=function(t,r,e,i,o,n){var s=o*o;n.x=6*(s-o)*t.x+(3*s-4*o+1)*r.x+6*(-s+o)*e.x+(3*s-2*o)*i.x,n.y=6*(s-o)*t.y+(3*s-4*o+1)*r.y+6*(-s+o)*e.y+(3*s-2*o)*i.y},t.Lerp=function(r,e,i){return new t(r.x+(e.x-r.x)*i,r.y+(e.y-r.y)*i)},t.Dot=function(t,r){return t.x*r.x+t.y*r.y},t.Normalize=function(r){var e=t.Zero();return this.NormalizeToRef(r,e),e},t.NormalizeToRef=function(t,r){var e=t.length();0!==e&&(r.x=t.x/e,r.y=t.y/e)},t.Minimize=function(r,e){return new t(r.x<e.x?r.x:e.x,r.y<e.y?r.y:e.y)},t.Maximize=function(r,e){return new t(r.x>e.x?r.x:e.x,r.y>e.y?r.y:e.y)},t.Transform=function(r,e){var i=t.Zero();return t.TransformToRef(r,e,i),i},t.TransformToRef=function(t,r,e){var i=r.m,o=t.x*i[0]+t.y*i[4]+i[12],n=t.x*i[1]+t.y*i[5]+i[13];e.x=o,e.y=n},t.PointInTriangle=function(t,r,e,i){var o=.5*(-e.y*i.x+r.y*(-e.x+i.x)+r.x*(e.y-i.y)+e.x*i.y),n=o<0?-1:1,s=(r.y*i.x-r.x*i.y+(i.y-r.y)*t.x+(r.x-i.x)*t.y)*n,a=(r.x*e.y-r.y*e.x+(r.y-e.y)*t.x+(e.x-r.x)*t.y)*n;return s>0&&a>0&&s+a<2*o*n},t.Distance=function(r,e){return Math.sqrt(t.DistanceSquared(r,e))},t.DistanceSquared=function(t,r){var e=t.x-r.x,i=t.y-r.y;return e*e+i*i},t.Center=function(r,e){return t.CenterToRef(r,e,t.Zero())},t.CenterToRef=function(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2)},t.DistanceOfPointFromSegment=function(r,e,i){var o=t.DistanceSquared(e,i);if(0===o)return t.Distance(r,e);var n=i.subtract(e),s=Math.max(0,Math.min(1,t.Dot(r.subtract(e),n)/o)),a=e.add(n.multiplyByFloats(s,s));return t.Distance(r,a)},t}(),N=function(){function t(t,r,e){void 0===t&&(t=0),void 0===r&&(r=0),void 0===e&&(e=0),this._isDirty=!0,this._x=t,this._y=r,this._z=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z,"}")},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var t=H(this._x);return t=397*(t=397*t^H(this._y))^H(this._z)},t.prototype.asArray=function(){var t=[];return this.toArray(t,0),t},t.prototype.toArray=function(t,r){return void 0===r&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,this},t.prototype.fromArray=function(r,e){return void 0===e&&(e=0),t.FromArrayToRef(r,e,this),this},t.prototype.toQuaternion=function(){return Z.RotationYawPitchRoll(this._y,this._x,this._z)},t.prototype.addInPlace=function(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)},t.prototype.addInPlaceFromFloats=function(t,r,e){return this.x+=t,this.y+=r,this.z+=e,this},t.prototype.add=function(r){return new t(this._x+r._x,this._y+r._y,this._z+r._z)},t.prototype.addToRef=function(t,r){return r.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)},t.prototype.subtractInPlace=function(t){return this.x-=t._x,this.y-=t._y,this.z-=t._z,this},t.prototype.subtract=function(r){return new t(this._x-r._x,this._y-r._y,this._z-r._z)},t.prototype.subtractToRef=function(t,r){return this.subtractFromFloatsToRef(t._x,t._y,t._z,r)},t.prototype.subtractFromFloats=function(r,e,i){return new t(this._x-r,this._y-e,this._z-i)},t.prototype.subtractFromFloatsToRef=function(t,r,e,i){return i.copyFromFloats(this._x-t,this._y-r,this._z-e)},t.prototype.negate=function(){return new t(-this._x,-this._y,-this._z)},t.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.negateToRef=function(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.scale=function(r){return new t(this._x*r,this._y*r,this._z*r)},t.prototype.scaleToRef=function(t,r){return r.copyFromFloats(this._x*t,this._y*t,this._z*t)},t.prototype.applyRotationQuaternionToRef=function(t,r){var e=t.w*this.x+t.y*this.z-t.z*this.y,i=t.w*this.y+t.z*this.x-t.x*this.z,o=t.w*this.z+t.x*this.y-t.y*this.x,n=-t.x*this.x-t.y*this.y-t.z*this.z;return r.x=e*t.w+n*-t.x+i*-t.z-o*-t.y,r.y=i*t.w+n*-t.y+o*-t.x-e*-t.z,r.z=o*t.w+n*-t.z+e*-t.y-i*-t.x,r},t.prototype.applyRotationQuaternionInPlace=function(t){return this.applyRotationQuaternionToRef(t,this)},t.prototype.applyRotationQuaternion=function(r){return this.applyRotationQuaternionToRef(r,t.Zero())},t.prototype.scaleAndAddToRef=function(t,r){return r.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)},t.prototype.projectOnPlane=function(r,e){var i=t.Zero();return this.projectOnPlaneToRef(r,e,i),i},t.prototype.projectOnPlaneToRef=function(r,e,i){var o=E.Vector3[0];r.normal.scaleToRef(-r.d,o);var n=E.Vector3[1];r.normal.negateToRef(n);var s=this,a=t.Dot(n,s);if(a<=1e-6)i.copyFrom(e);else{var u=E.Vector3[2];o.subtractToRef(e,u);var h=t.Dot(u,n)/a;i.set(e.x+s.x*h,e.y+s.y*h,e.z+s.z*h)}},t.prototype.equals=function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z},t.prototype.equalsWithEpsilon=function(t,r){return void 0===r&&(r=.001),t&&k.WithinEpsilon(this._x,t._x,r)&&k.WithinEpsilon(this._y,t._y,r)&&k.WithinEpsilon(this._z,t._z,r)},t.prototype.equalsToFloats=function(t,r,e){return this._x===t&&this._y===r&&this._z===e},t.prototype.multiplyInPlace=function(t){return this.x*=t._x,this.y*=t._y,this.z*=t._z,this},t.prototype.multiply=function(t){return this.multiplyByFloats(t._x,t._y,t._z)},t.prototype.multiplyToRef=function(t,r){return r.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)},t.prototype.multiplyByFloats=function(r,e,i){return new t(this._x*r,this._y*e,this._z*i)},t.prototype.divide=function(r){return new t(this._x/r._x,this._y/r._y,this._z/r._z)},t.prototype.divideToRef=function(t,r){return r.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.minimizeInPlace=function(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)},t.prototype.maximizeInPlace=function(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)},t.prototype.minimizeInPlaceFromFloats=function(t,r,e){return t<this._x&&(this.x=t),r<this._y&&(this.y=r),e<this._z&&(this.z=e),this},t.prototype.maximizeInPlaceFromFloats=function(t,r,e){return t>this._x&&(this.x=t),r>this._y&&(this.y=r),e>this._z&&(this.z=e),this},t.prototype.isNonUniformWithinEpsilon=function(t){var r=Math.abs(this._x),e=Math.abs(this._y);if(!k.WithinEpsilon(r,e,t))return!0;var i=Math.abs(this._z);return!k.WithinEpsilon(r,i,t)||!k.WithinEpsilon(e,i,t)},Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)},enumerable:!1,configurable:!0}),t.prototype.floor=function(){return new t(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))},t.prototype.fract=function(){return new t(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))},t.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)},t.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z},Object.defineProperty(t.prototype,"hasAZeroComponent",{get:function(){return this._x*this._y*this._z==0},enumerable:!1,configurable:!0}),t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.reorderInPlace=function(t){var r=this;return"xyz"===(t=t.toLowerCase())||(E.Vector3[0].copyFrom(this),["x","y","z"].forEach((function(e,i){r[e]=E.Vector3[0][t[i]]}))),this},t.prototype.rotateByQuaternionToRef=function(r,e){return r.toRotationMatrix(E.Matrix[0]),t.TransformCoordinatesToRef(this,E.Matrix[0],e),e},t.prototype.rotateByQuaternionAroundPointToRef=function(t,r,e){return this.subtractToRef(r,E.Vector3[0]),E.Vector3[0].rotateByQuaternionToRef(t,E.Vector3[0]),r.addToRef(E.Vector3[0],e),e},t.prototype.cross=function(r){return t.Cross(this,r)},t.prototype.normalizeFromLength=function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)},t.prototype.normalizeToNew=function(){var r=new t(0,0,0);return this.normalizeToRef(r),r},t.prototype.normalizeToRef=function(t){var r=this.length();return 0===r||1===r?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/r,t)},t.prototype.clone=function(){return new t(this._x,this._y,this._z)},t.prototype.copyFrom=function(t){return this.copyFromFloats(t._x,t._y,t._z)},t.prototype.copyFromFloats=function(t,r,e){return this.x=t,this.y=r,this.z=e,this},t.prototype.set=function(t,r,e){return this.copyFromFloats(t,r,e)},t.prototype.setAll=function(t){return this.x=this.y=this.z=t,this},t.GetClipFactor=function(r,e,i,o){var n=t.Dot(r,i)-o;return n/(n-(t.Dot(e,i)-o))},t.GetAngleBetweenVectors=function(r,e,i){var o=r.normalizeToRef(E.Vector3[1]),n=e.normalizeToRef(E.Vector3[2]),s=t.Dot(o,n);s=k.Clamp(s,-1,1);var a=Math.acos(s),u=E.Vector3[3];return t.CrossToRef(o,n,u),t.Dot(u,i)>0?isNaN(a)?0:a:isNaN(a)?-Math.PI:-Math.acos(s)},t.GetAngleBetweenVectorsOnPlane=function(r,e,i){E.Vector3[0].copyFrom(r);var o=E.Vector3[0];E.Vector3[1].copyFrom(e);var n=E.Vector3[1];E.Vector3[2].copyFrom(i);var s=E.Vector3[2],a=E.Vector3[3],u=E.Vector3[4];o.normalize(),n.normalize(),s.normalize(),t.CrossToRef(s,o,a),t.CrossToRef(a,s,u);var h=Math.atan2(t.Dot(n,a),t.Dot(n,u));return k.NormalizeRadians(h)},t.SlerpToRef=function(r,e,i,o){i=k.Clamp(i,0,1);var n=E.Vector3[0],s=E.Vector3[1];n.copyFrom(r);var a=n.length();n.normalizeFromLength(a),s.copyFrom(e);var u=s.length();s.normalizeFromLength(u);var h,f,c=t.Dot(n,s);if(c<.999){var y=Math.acos(c),p=1/Math.sin(y);h=Math.sin((1-i)*y)*p,f=Math.sin(i*y)*p}else h=1-i,f=i;n.scaleInPlace(h),s.scaleInPlace(f),o.copyFrom(n).addInPlace(s),o.scaleInPlace(k.Lerp(a,u,i))},t.SmoothToRef=function(r,e,i,o,n){t.SlerpToRef(r,e,0===o?1:i/o,n)},t.FromArray=function(r,e){return void 0===e&&(e=0),new t(r[e],r[e+1],r[e+2])},t.FromFloatArray=function(r,e){return t.FromArray(r,e)},t.FromArrayToRef=function(t,r,e){e.x=t[r],e.y=t[r+1],e.z=t[r+2]},t.FromFloatArrayToRef=function(r,e,i){return t.FromArrayToRef(r,e,i)},t.FromFloatsToRef=function(t,r,e,i){i.copyFromFloats(t,r,e)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},Object.defineProperty(t,"UpReadOnly",{get:function(){return t._UpReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RightReadOnly",{get:function(){return t._RightReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LeftReadOnly",{get:function(){return t._LeftReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LeftHandedForwardReadOnly",{get:function(){return t._LeftHandedForwardReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RightHandedForwardReadOnly",{get:function(){return t._RightHandedForwardReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ZeroReadOnly",{get:function(){return t._ZeroReadOnly},enumerable:!1,configurable:!0}),t.Down=function(){return new t(0,-1,0)},t.Forward=function(r){return void 0===r&&(r=!1),new t(0,0,r?-1:1)},t.Backward=function(r){return void 0===r&&(r=!1),new t(0,0,r?1:-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(r,e){var i=t.Zero();return t.TransformCoordinatesToRef(r,e,i),i},t.TransformCoordinatesToRef=function(r,e,i){t.TransformCoordinatesFromFloatsToRef(r._x,r._y,r._z,e,i)},t.TransformCoordinatesFromFloatsToRef=function(t,r,e,i,o){var n=i.m,s=t*n[0]+r*n[4]+e*n[8]+n[12],a=t*n[1]+r*n[5]+e*n[9]+n[13],u=t*n[2]+r*n[6]+e*n[10]+n[14],h=1/(t*n[3]+r*n[7]+e*n[11]+n[15]);o.x=s*h,o.y=a*h,o.z=u*h},t.TransformNormal=function(r,e){var i=t.Zero();return t.TransformNormalToRef(r,e,i),i},t.TransformNormalToRef=function(t,r,e){this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,r,e)},t.TransformNormalFromFloatsToRef=function(t,r,e,i,o){var n=i.m;o.x=t*n[0]+r*n[4]+e*n[8],o.y=t*n[1]+r*n[5]+e*n[9],o.z=t*n[2]+r*n[6]+e*n[10]},t.CatmullRom=function(r,e,i,o,n){var s=n*n,a=n*s;return new t(.5*(2*e._x+(-r._x+i._x)*n+(2*r._x-5*e._x+4*i._x-o._x)*s+(-r._x+3*e._x-3*i._x+o._x)*a),.5*(2*e._y+(-r._y+i._y)*n+(2*r._y-5*e._y+4*i._y-o._y)*s+(-r._y+3*e._y-3*i._y+o._y)*a),.5*(2*e._z+(-r._z+i._z)*n+(2*r._z-5*e._z+4*i._z-o._z)*s+(-r._z+3*e._z-3*i._z+o._z)*a))},t.Clamp=function(r,e,i){var o=new t;return t.ClampToRef(r,e,i,o),o},t.ClampToRef=function(t,r,e,i){var o=t._x;o=(o=o>e._x?e._x:o)<r._x?r._x:o;var n=t._y;n=(n=n>e._y?e._y:n)<r._y?r._y:n;var s=t._z;s=(s=s>e._z?e._z:s)<r._z?r._z:s,i.copyFromFloats(o,n,s)},t.CheckExtends=function(t,r,e){r.minimizeInPlace(t),e.maximizeInPlace(t)},t.Hermite=function(r,e,i,o,n){var s=n*n,a=n*s,u=2*a-3*s+1,h=-2*a+3*s,f=a-2*s+n,c=a-s;return new t(r._x*u+i._x*h+e._x*f+o._x*c,r._y*u+i._y*h+e._y*f+o._y*c,r._z*u+i._z*h+e._z*f+o._z*c)},t.Hermite1stDerivative=function(r,e,i,o,n){var s=t.Zero();return this.Hermite1stDerivativeToRef(r,e,i,o,n,s),s},t.Hermite1stDerivativeToRef=function(t,r,e,i,o,n){var s=o*o;n.x=6*(s-o)*t.x+(3*s-4*o+1)*r.x+6*(-s+o)*e.x+(3*s-2*o)*i.x,n.y=6*(s-o)*t.y+(3*s-4*o+1)*r.y+6*(-s+o)*e.y+(3*s-2*o)*i.y,n.z=6*(s-o)*t.z+(3*s-4*o+1)*r.z+6*(-s+o)*e.z+(3*s-2*o)*i.z},t.Lerp=function(r,e,i){var o=new t(0,0,0);return t.LerpToRef(r,e,i,o),o},t.LerpToRef=function(t,r,e,i){i.x=t._x+(r._x-t._x)*e,i.y=t._y+(r._y-t._y)*e,i.z=t._z+(r._z-t._z)*e},t.Dot=function(t,r){return t._x*r._x+t._y*r._y+t._z*r._z},t.Cross=function(r,e){var i=t.Zero();return t.CrossToRef(r,e,i),i},t.CrossToRef=function(t,r,e){var i=t._y*r._z-t._z*r._y,o=t._z*r._x-t._x*r._z,n=t._x*r._y-t._y*r._x;e.copyFromFloats(i,o,n)},t.Normalize=function(r){var e=t.Zero();return t.NormalizeToRef(r,e),e},t.NormalizeToRef=function(t,r){t.normalizeToRef(r)},t.Project=function(r,e,i,o){var n=new t;return t.ProjectToRef(r,e,i,o,n),n},t.ProjectToRef=function(r,e,i,o,n){var s=o.width,a=o.height,u=o.x,h=o.y,f=E.Matrix[1];j.FromValuesToRef(s/2,0,0,0,0,-a/2,0,0,0,0,.5,0,u+s/2,a/2+h,.5,1,f);var c=E.Matrix[0];return e.multiplyToRef(i,c),c.multiplyToRef(f,c),t.TransformCoordinatesToRef(r,c,n),n},t._UnprojectFromInvertedMatrixToRef=function(r,e,i){t.TransformCoordinatesToRef(r,e,i);var o=e.m,n=r._x*o[3]+r._y*o[7]+r._z*o[11]+o[15];k.WithinEpsilon(n,1)&&i.scaleInPlace(1/n)},t.UnprojectFromTransform=function(t,r,e,i,o){return this.Unproject(t,r,e,i,o,j.IdentityReadOnly)},t.Unproject=function(r,e,i,o,n,s){var a=t.Zero();return t.UnprojectToRef(r,e,i,o,n,s,a),a},t.UnprojectToRef=function(r,e,i,o,n,s,a){t.UnprojectFloatsToRef(r._x,r._y,r._z,e,i,o,n,s,a)},t.UnprojectFloatsToRef=function(r,e,i,o,n,s,a,u,h){var f,c=E.Matrix[0];s.multiplyToRef(a,c),c.multiplyToRef(u,c),c.invert();var y=E.Vector3[0];y.x=r/o*2-1,y.y=-(e/n*2-1),(null===(f=O.LastCreatedEngine)||void 0===f?void 0:f.isNDCHalfZRange)?y.z=i:y.z=2*i-1,t._UnprojectFromInvertedMatrixToRef(y,c,h)},t.Minimize=function(t,r){var e=t.clone();return e.minimizeInPlace(r),e},t.Maximize=function(t,r){var e=t.clone();return e.maximizeInPlace(r),e},t.Distance=function(r,e){return Math.sqrt(t.DistanceSquared(r,e))},t.DistanceSquared=function(t,r){var e=t._x-r._x,i=t._y-r._y,o=t._z-r._z;return e*e+i*i+o*o},t.ProjectOnTriangleToRef=function(r,e,i,o,n){var s=E.Vector3[0],a=E.Vector3[1],u=E.Vector3[2],h=E.Vector3[3],f=E.Vector3[4];i.subtractToRef(e,s),o.subtractToRef(e,a),o.subtractToRef(i,u);var c=s.length(),y=a.length(),p=u.length();if(c<.001||y<.001||p<.001)return n.copyFrom(e),t.Distance(r,e);r.subtractToRef(e,f),t.CrossToRef(s,a,h);var l=h.length();if(l<.001)return n.copyFrom(e),t.Distance(r,e);h.normalizeFromLength(l);var _=f.length();if(_<.001)return n.copyFrom(e),0;f.normalizeFromLength(_);var x=t.Dot(h,f),d=E.Vector3[5],m=E.Vector3[6];d.copyFrom(h).scaleInPlace(-_*x),m.copyFrom(r).addInPlace(d);var v=E.Vector3[4],w=E.Vector3[5],R=E.Vector3[7],z=E.Vector3[8];v.copyFrom(s).scaleInPlace(1/c),z.copyFrom(a).scaleInPlace(1/y),v.addInPlace(z).scaleInPlace(-1),w.copyFrom(s).scaleInPlace(-1/c),z.copyFrom(u).scaleInPlace(1/p),w.addInPlace(z).scaleInPlace(-1),R.copyFrom(u).scaleInPlace(-1/p),z.copyFrom(a).scaleInPlace(-1/y),R.addInPlace(z).scaleInPlace(-1);var T=E.Vector3[9];T.copyFrom(m).subtractInPlace(e),t.CrossToRef(v,T,z);var F=t.Dot(z,h);T.copyFrom(m).subtractInPlace(i),t.CrossToRef(w,T,z);var g=t.Dot(z,h);T.copyFrom(m).subtractInPlace(o),t.CrossToRef(R,T,z);var M,b,I=t.Dot(z,h),P=E.Vector3[10];F>0&&g<0?(P.copyFrom(s),M=e,b=i):g>0&&I<0?(P.copyFrom(u),M=i,b=o):(P.copyFrom(a).scaleInPlace(-1),M=o,b=e);var V=E.Vector3[9],A=E.Vector3[4];if(M.subtractToRef(m,z),b.subtractToRef(m,V),t.CrossToRef(z,V,A),!(t.Dot(A,h)<0))return n.copyFrom(m),Math.abs(_*x);var D=E.Vector3[5];t.CrossToRef(P,A,D),D.normalize();var S=E.Vector3[9];S.copyFrom(M).subtractInPlace(m);var C=S.length();if(C<.001)return n.copyFrom(M),t.Distance(r,M);S.normalizeFromLength(C);var L=t.Dot(D,S),B=E.Vector3[7];B.copyFrom(m).addInPlace(D.scaleInPlace(C*L)),z.copyFrom(B).subtractInPlace(M),_=P.length(),P.normalizeFromLength(_);var O=t.Dot(z,P)/Math.max(_,.001);return O=k.Clamp(O,0,1),B.copyFrom(M).addInPlace(P.scaleInPlace(O*_)),n.copyFrom(B),t.Distance(r,B)},t.Center=function(r,e){return t.CenterToRef(r,e,t.Zero())},t.CenterToRef=function(t,r,e){return e.copyFromFloats((t._x+r._x)/2,(t._y+r._y)/2,(t._z+r._z)/2)},t.RotationFromAxis=function(r,e,i){var o=t.Zero();return t.RotationFromAxisToRef(r,e,i,o),o},t.RotationFromAxisToRef=function(t,r,e,i){var o=E.Quaternion[0];Z.RotationQuaternionFromAxisToRef(t,r,e,o),o.toEulerAnglesToRef(i)},t._UpReadOnly=t.Up(),t._LeftHandedForwardReadOnly=t.Forward(!1),t._RightHandedForwardReadOnly=t.Forward(!0),t._RightReadOnly=t.Right(),t._LeftReadOnly=t.Left(),t._ZeroReadOnly=t.Zero(),t}(),q=function(){function t(t,r,e,i){this.x=t,this.y=r,this.z=e,this.w=i}return t.prototype.toString=function(){return"{X: ".concat(this.x," Y: ").concat(this.y," Z: ").concat(this.z," W: ").concat(this.w,"}")},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var t=H(this.x);return t=397*(t=397*(t=397*t^H(this.y))^H(this.z))^H(this.w)},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.toArray=function(t,r){return void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,this},t.prototype.fromArray=function(r,e){return void 0===e&&(e=0),t.FromArrayToRef(r,e,this),this},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.add=function(r){return new t(this.x+r.x,this.y+r.y,this.z+r.z,this.w+r.w)},t.prototype.addToRef=function(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,r.z=this.z+t.z,r.w=this.w+t.w,this},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},t.prototype.subtract=function(r){return new t(this.x-r.x,this.y-r.y,this.z-r.z,this.w-r.w)},t.prototype.subtractToRef=function(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,r.z=this.z-t.z,r.w=this.w-t.w,this},t.prototype.subtractFromFloats=function(r,e,i,o){return new t(this.x-r,this.y-e,this.z-i,this.w-o)},t.prototype.subtractFromFloatsToRef=function(t,r,e,i,o){return o.x=this.x-t,o.y=this.y-r,o.z=this.z-e,o.w=this.w-i,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},t.prototype.negateToRef=function(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.scale=function(r){return new t(this.x*r,this.y*r,this.z*r,this.w*r)},t.prototype.scaleToRef=function(t,r){return r.x=this.x*t,r.y=this.y*t,r.z=this.z*t,r.w=this.w*t,this},t.prototype.scaleAndAddToRef=function(t,r){return r.x+=this.x*t,r.y+=this.y*t,r.z+=this.z*t,r.w+=this.w*t,this},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},t.prototype.equalsWithEpsilon=function(t,r){return void 0===r&&(r=.001),t&&k.WithinEpsilon(this.x,t.x,r)&&k.WithinEpsilon(this.y,t.y,r)&&k.WithinEpsilon(this.z,t.z,r)&&k.WithinEpsilon(this.w,t.w,r)},t.prototype.equalsToFloats=function(t,r,e,i){return this.x===t&&this.y===r&&this.z===e&&this.w===i},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},t.prototype.multiply=function(r){return new t(this.x*r.x,this.y*r.y,this.z*r.z,this.w*r.w)},t.prototype.multiplyToRef=function(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,r.z=this.z*t.z,r.w=this.w*t.w,this},t.prototype.multiplyByFloats=function(r,e,i,o){return new t(this.x*r,this.y*e,this.z*i,this.w*o)},t.prototype.divide=function(r){return new t(this.x/r.x,this.y/r.y,this.z/r.z,this.w/r.w)},t.prototype.divideToRef=function(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,r.z=this.z/t.z,r.w=this.w/t.w,this},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this},t.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)},t.prototype.toVector3=function(){return new N(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},t.prototype.copyFromFloats=function(t,r,e,i){return this.x=t,this.y=r,this.z=e,this.w=i,this},t.prototype.set=function(t,r,e,i){return this.copyFromFloats(t,r,e,i)},t.prototype.setAll=function(t){return this.x=this.y=this.z=this.w=t,this},t.FromArray=function(r,e){return e||(e=0),new t(r[e],r[e+1],r[e+2],r[e+3])},t.FromArrayToRef=function(t,r,e){e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.w=t[r+3]},t.FromFloatArrayToRef=function(r,e,i){t.FromArrayToRef(r,e,i)},t.FromFloatsToRef=function(t,r,e,i,o){o.x=t,o.y=r,o.z=e,o.w=i},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(r){var e=t.Zero();return t.NormalizeToRef(r,e),e},t.NormalizeToRef=function(t,r){r.copyFrom(t),r.normalize()},t.Minimize=function(t,r){var e=t.clone();return e.minimizeInPlace(r),e},t.Maximize=function(t,r){var e=t.clone();return e.maximizeInPlace(r),e},t.Distance=function(r,e){return Math.sqrt(t.DistanceSquared(r,e))},t.DistanceSquared=function(t,r){var e=t.x-r.x,i=t.y-r.y,o=t.z-r.z,n=t.w-r.w;return e*e+i*i+o*o+n*n},t.Center=function(r,e){return t.CenterToRef(r,e,t.Zero())},t.CenterToRef=function(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2,(t.z+r.z)/2,(t.w+r.w)/2)},t.TransformCoordinates=function(r,e){var i=t.Zero();return t.TransformCoordinatesToRef(r,e,i),i},t.TransformCoordinatesToRef=function(r,e,i){t.TransformCoordinatesFromFloatsToRef(r._x,r._y,r._z,e,i)},t.TransformCoordinatesFromFloatsToRef=function(t,r,e,i,o){var n=i.m,s=t*n[0]+r*n[4]+e*n[8]+n[12],a=t*n[1]+r*n[5]+e*n[9]+n[13],u=t*n[2]+r*n[6]+e*n[10]+n[14],h=t*n[3]+r*n[7]+e*n[11]+n[15];o.x=s,o.y=a,o.z=u,o.w=h},t.TransformNormal=function(r,e){var i=t.Zero();return t.TransformNormalToRef(r,e,i),i},t.TransformNormalToRef=function(t,r,e){var i=r.m,o=t.x*i[0]+t.y*i[4]+t.z*i[8],n=t.x*i[1]+t.y*i[5]+t.z*i[9],s=t.x*i[2]+t.y*i[6]+t.z*i[10];e.x=o,e.y=n,e.z=s,e.w=t.w},t.TransformNormalFromFloatsToRef=function(t,r,e,i,o,n){var s=o.m;n.x=t*s[0]+r*s[4]+e*s[8],n.y=t*s[1]+r*s[5]+e*s[9],n.z=t*s[2]+r*s[6]+e*s[10],n.w=i},t.FromVector3=function(r,e){return void 0===e&&(e=0),new t(r._x,r._y,r._z,e)},t}(),Z=function(){function t(t,r,e,i){void 0===t&&(t=0),void 0===r&&(r=0),void 0===e&&(e=0),void 0===i&&(i=1),this._isDirty=!0,this._x=t,this._y=r,this._z=e,this._w=i}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._w},set:function(t){this._w=t,this._isDirty=!0},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z," W: ").concat(this._w,"}")},t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var t=H(this._x);return t=397*(t=397*(t=397*t^H(this._y))^H(this._z))^H(this._w)},t.prototype.asArray=function(){return[this._x,this._y,this._z,this._w]},t.prototype.toArray=function(t,r){return void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,this},t.prototype.equals=function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w},t.prototype.equalsWithEpsilon=function(t,r){return void 0===r&&(r=.001),t&&k.WithinEpsilon(this._x,t._x,r)&&k.WithinEpsilon(this._y,t._y,r)&&k.WithinEpsilon(this._z,t._z,r)&&k.WithinEpsilon(this._w,t._w,r)},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._w)},t.prototype.copyFrom=function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this.w=t._w,this},t.prototype.copyFromFloats=function(t,r,e,i){return this.x=t,this.y=r,this.z=e,this.w=i,this},t.prototype.set=function(t,r,e,i){return this.copyFromFloats(t,r,e,i)},t.prototype.add=function(r){return new t(this._x+r._x,this._y+r._y,this._z+r._z,this._w+r._w)},t.prototype.addInPlace=function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this},t.prototype.subtract=function(r){return new t(this._x-r._x,this._y-r._y,this._z-r._z,this._w-r._w)},t.prototype.subtractInPlace=function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this},t.prototype.scale=function(r){return new t(this._x*r,this._y*r,this._z*r,this._w*r)},t.prototype.scaleToRef=function(t,r){return r.x=this._x*t,r.y=this._y*t,r.z=this._z*t,r.w=this._w*t,this},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.scaleAndAddToRef=function(t,r){return r.x+=this._x*t,r.y+=this._y*t,r.z+=this._z*t,r.w+=this._w*t,this},t.prototype.multiply=function(r){var e=new t(0,0,0,1);return this.multiplyToRef(r,e),e},t.prototype.multiplyToRef=function(t,r){var e=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,i=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,o=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,n=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return r.copyFromFloats(e,i,o,n),this},t.prototype.multiplyInPlace=function(t){return this.multiplyToRef(t,this),this},t.prototype.conjugateToRef=function(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this._x,-this._y,-this._z,this._w)},t.prototype.invert=function(){var t=this.conjugate(),r=this.lengthSquared();return 0==r||1==r||t.scaleInPlace(1/r),t},t.prototype.invertInPlace=function(){this.conjugateInPlace();var t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this},t.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},t.prototype.length=function(){return Math.sqrt(this.lengthSquared())},t.prototype.normalize=function(){var t=this.length();if(0===t)return this;var r=1/t;return this.scaleInPlace(r),this},t.prototype.normalizeToNew=function(){var t=this.length();if(0===t)return this.clone();var r=1/t;return this.scale(r)},t.prototype.toEulerAngles=function(){var t=N.Zero();return this.toEulerAnglesToRef(t),t},t.prototype.toEulerAnglesToRef=function(t){var r=this._z,e=this._x,i=this._y,o=this._w,n=i*r-e*o,s=.4999999;if(n<-s)t.y=2*Math.atan2(i,o),t.x=Math.PI/2,t.z=0;else if(n>s)t.y=2*Math.atan2(i,o),t.x=-Math.PI/2,t.z=0;else{var a=o*o,u=r*r,h=e*e,f=i*i;t.z=Math.atan2(2*(e*i+r*o),-u-h+f+a),t.x=Math.asin(-2*n),t.y=Math.atan2(2*(r*e+i*o),u-h-f+a)}return this},t.prototype.toRotationMatrix=function(t){return j.FromQuaternionToRef(this,t),this},t.prototype.fromRotationMatrix=function(r){return t.FromRotationMatrixToRef(r,this),this},t.FromRotationMatrix=function(r){var e=new t;return t.FromRotationMatrixToRef(r,e),e},t.FromRotationMatrixToRef=function(t,r){var e,i=t.m,o=i[0],n=i[4],s=i[8],a=i[1],u=i[5],h=i[9],f=i[2],c=i[6],y=i[10],p=o+u+y;p>0?(e=.5/Math.sqrt(p+1),r.w=.25/e,r.x=(c-h)*e,r.y=(s-f)*e,r.z=(a-n)*e):o>u&&o>y?(e=2*Math.sqrt(1+o-u-y),r.w=(c-h)/e,r.x=.25*e,r.y=(n+a)/e,r.z=(s+f)/e):u>y?(e=2*Math.sqrt(1+u-o-y),r.w=(s-f)/e,r.x=(n+a)/e,r.y=.25*e,r.z=(h+c)/e):(e=2*Math.sqrt(1+y-o-u),r.w=(a-n)/e,r.x=(s+f)/e,r.y=(h+c)/e,r.z=.25*e)},t.Dot=function(t,r){return t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w},t.AreClose=function(r,e){return t.Dot(r,e)>=0},t.SmoothToRef=function(r,e,i,o,n){var s=0===o?1:i/o;s=k.Clamp(s,0,1),t.SlerpToRef(r,e,s,n)},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(r){return new t(-r._x,-r._y,-r._z,r._w)},t.InverseToRef=function(t,r){return r.set(-t._x,-t._y,-t._z,t._w),r},t.Identity=function(){return new t(0,0,0,1)},t.IsIdentity=function(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w},t.RotationAxis=function(r,e){return t.RotationAxisToRef(r,e,new t)},t.RotationAxisToRef=function(t,r,e){var i=Math.sin(r/2);return t.normalize(),e.w=Math.cos(r/2),e.x=t._x*i,e.y=t._y*i,e.z=t._z*i,e},t.FromArray=function(r,e){return e||(e=0),new t(r[e],r[e+1],r[e+2],r[e+3])},t.FromArrayToRef=function(t,r,e){e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.w=t[r+3]},t.FromEulerAngles=function(r,e,i){var o=new t;return t.RotationYawPitchRollToRef(e,r,i,o),o},t.FromEulerAnglesToRef=function(r,e,i,o){return t.RotationYawPitchRollToRef(e,r,i,o),o},t.FromEulerVector=function(r){var e=new t;return t.RotationYawPitchRollToRef(r._y,r._x,r._z,e),e},t.FromEulerVectorToRef=function(r,e){return t.RotationYawPitchRollToRef(r._y,r._x,r._z,e),e},t.FromUnitVectorsToRef=function(t,r,e){var i=N.Dot(t,r)+1;return i<.001?Math.abs(t.x)>Math.abs(t.z)?e.set(-t.y,t.x,0,0):e.set(0,-t.z,t.y,0):(N.CrossToRef(t,r,W.Vector3[0]),e.set(W.Vector3[0].x,W.Vector3[0].y,W.Vector3[0].z,i)),e.normalize()},t.RotationYawPitchRoll=function(r,e,i){var o=new t;return t.RotationYawPitchRollToRef(r,e,i,o),o},t.RotationYawPitchRollToRef=function(t,r,e,i){var o=.5*e,n=.5*r,s=.5*t,a=Math.sin(o),u=Math.cos(o),h=Math.sin(n),f=Math.cos(n),c=Math.sin(s),y=Math.cos(s);i.x=y*h*u+c*f*a,i.y=c*f*u-y*h*a,i.z=y*f*a-c*h*u,i.w=y*f*u+c*h*a},t.RotationAlphaBetaGamma=function(r,e,i){var o=new t;return t.RotationAlphaBetaGammaToRef(r,e,i,o),o},t.RotationAlphaBetaGammaToRef=function(t,r,e,i){var o=.5*(e+t),n=.5*(e-t),s=.5*r;i.x=Math.cos(n)*Math.sin(s),i.y=Math.sin(n)*Math.sin(s),i.z=Math.sin(o)*Math.cos(s),i.w=Math.cos(o)*Math.cos(s)},t.RotationQuaternionFromAxis=function(r,e,i){var o=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(r,e,i,o),o},t.RotationQuaternionFromAxisToRef=function(r,e,i,o){var n=E.Matrix[0];j.FromXYZAxesToRef(r.normalize(),e.normalize(),i.normalize(),n),t.FromRotationMatrixToRef(n,o)},t.FromLookDirectionLH=function(r,e){var i=new t;return t.FromLookDirectionLHToRef(r,e,i),i},t.FromLookDirectionLHToRef=function(r,e,i){var o=E.Matrix[0];j.LookDirectionLHToRef(r,e,o),t.FromRotationMatrixToRef(o,i)},t.FromLookDirectionRH=function(r,e){var i=new t;return t.FromLookDirectionRHToRef(r,e,i),i},t.FromLookDirectionRHToRef=function(r,e,i){var o=E.Matrix[0];return j.LookDirectionRHToRef(r,e,o),t.FromRotationMatrixToRef(o,i)},t.Slerp=function(r,e,i){var o=t.Identity();return t.SlerpToRef(r,e,i,o),o},t.SlerpToRef=function(t,r,e,i){var o,n,s=t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w,a=!1;if(s<0&&(a=!0,s=-s),s>.999999)n=1-e,o=a?-e:e;else{var u=Math.acos(s),h=1/Math.sin(u);n=Math.sin((1-e)*u)*h,o=a?-Math.sin(e*u)*h:Math.sin(e*u)*h}i.x=n*t._x+o*r._x,i.y=n*t._y+o*r._y,i.z=n*t._z+o*r._z,i.w=n*t._w+o*r._w},t.Hermite=function(r,e,i,o,n){var s=n*n,a=n*s,u=2*a-3*s+1,h=-2*a+3*s,f=a-2*s+n,c=a-s;return new t(r._x*u+i._x*h+e._x*f+o._x*c,r._y*u+i._y*h+e._y*f+o._y*c,r._z*u+i._z*h+e._z*f+o._z*c,r._w*u+i._w*h+e._w*f+o._w*c)},t.Hermite1stDerivative=function(r,e,i,o,n){var s=t.Zero();return this.Hermite1stDerivativeToRef(r,e,i,o,n,s),s},t.Hermite1stDerivativeToRef=function(t,r,e,i,o,n){var s=o*o;n.x=6*(s-o)*t.x+(3*s-4*o+1)*r.x+6*(-s+o)*e.x+(3*s-2*o)*i.x,n.y=6*(s-o)*t.y+(3*s-4*o+1)*r.y+6*(-s+o)*e.y+(3*s-2*o)*i.y,n.z=6*(s-o)*t.z+(3*s-4*o+1)*r.z+6*(-s+o)*e.z+(3*s-2*o)*i.z,n.w=6*(s-o)*t.w+(3*s-4*o+1)*r.w+6*(-s+o)*e.w+(3*s-2*o)*i.w},t}(),j=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,B.MatrixTrackPrecisionChange&&B.MatrixTrackedMatrices.push(this),this._m=new B.MatrixCurrentType(16),this.markAsUpdated()}return Object.defineProperty(t,"Use64Bits",{get:function(){return B.MatrixUse64Bits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),t.prototype.markAsUpdated=function(){this.updateFlag=t._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype._updateIdentityStatus=function(t,r,e,i){void 0===r&&(r=!1),void 0===e&&(e=!1),void 0===i&&(i=!0),this._isIdentity=t,this._isIdentity3x2=t||e,this._isIdentityDirty=!this._isIdentity&&r,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var t=this._m,r=t[0],e=t[1],i=t[2],o=t[3],n=t[4],s=t[5],a=t[6],u=t[7],h=t[8],f=t[9],c=t[10],y=t[11],p=t[12],l=t[13],_=t[14],x=t[15],d=c*x-_*y,m=f*x-l*y,v=f*_-l*c,w=h*x-p*y,R=h*_-c*p,z=h*l-p*f;return r*+(s*d-a*m+u*v)+e*-(n*d-a*w+u*R)+i*+(n*m-s*w+u*z)+o*-(n*v-s*R+a*z)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(r){var e=new t;return this.addToRef(r,e),e},t.prototype.addToRef=function(t,r){for(var e=this._m,i=r._m,o=t.m,n=0;n<16;n++)i[n]=e[n]+o[n];return r.markAsUpdated(),this},t.prototype.addToSelf=function(t){for(var r=this._m,e=t.m,i=0;i<16;i++)r[i]+=e[i];return this.markAsUpdated(),this},t.prototype.invertToRef=function(r){if(!0===this._isIdentity)return t.IdentityToRef(r),this;var e=this._m,i=e[0],o=e[1],n=e[2],s=e[3],a=e[4],u=e[5],h=e[6],f=e[7],c=e[8],y=e[9],p=e[10],l=e[11],_=e[12],x=e[13],d=e[14],m=e[15],v=p*m-d*l,w=y*m-x*l,R=y*d-x*p,z=c*m-_*l,T=c*d-p*_,F=c*x-_*y,g=+(u*v-h*w+f*R),M=-(a*v-h*z+f*T),b=+(a*w-u*z+f*F),I=-(a*R-u*T+h*F),P=i*g+o*M+n*b+s*I;if(0===P)return r.copyFrom(this),this;var V=1/P,A=h*m-d*f,D=u*m-x*f,S=u*d-x*h,C=a*m-_*f,k=a*d-_*h,L=a*x-_*u,B=h*l-p*f,O=u*l-y*f,H=u*p-y*h,U=a*l-c*f,N=a*p-c*h,q=a*y-c*u,Z=-(o*v-n*w+s*R),j=+(i*v-n*z+s*T),E=-(i*w-o*z+s*F),W=+(i*R-o*T+n*F),Q=+(o*A-n*D+s*S),Y=-(i*A-n*C+s*k),G=+(i*D-o*C+s*L),X=-(i*S-o*k+n*L),J=-(o*B-n*O+s*H),K=+(i*B-n*U+s*N),$=-(i*O-o*U+s*q),tt=+(i*H-o*N+n*q);return t.FromValuesToRef(g*V,Z*V,Q*V,J*V,M*V,j*V,Y*V,K*V,b*V,E*V,G*V,$*V,I*V,W*V,X*V,tt*V,r),this},t.prototype.addAtIndex=function(t,r){return this._m[t]+=r,this.markAsUpdated(),this},t.prototype.multiplyAtIndex=function(t,r){return this._m[t]*=r,this.markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(t,r,e){return this._m[12]=t,this._m[13]=r,this._m[14]=e,this.markAsUpdated(),this},t.prototype.addTranslationFromFloats=function(t,r,e){return this._m[12]+=t,this._m[13]+=r,this._m[14]+=e,this.markAsUpdated(),this},t.prototype.setTranslation=function(t){return this.setTranslationFromFloats(t._x,t._y,t._z)},t.prototype.getTranslation=function(){return new N(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var r=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,r[12],r[13],r[14],r[15],this),this._updateIdentityStatus(0===r[12]&&0===r[13]&&0===r[14]&&1===r[15]),this},t.prototype.multiply=function(r){var e=new t;return this.multiplyToRef(r,e),e},t.prototype.copyFrom=function(t){t.copyToArray(this._m);var r=t;return this.updateFlag=r.updateFlag,this._updateIdentityStatus(r._isIdentity,r._isIdentityDirty,r._isIdentity3x2,r._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(t,r){void 0===r&&(r=0);var e=this._m;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t[r+9]=e[9],t[r+10]=e[10],t[r+11]=e[11],t[r+12]=e[12],t[r+13]=e[13],t[r+14]=e[14],t[r+15]=e[15],this},t.prototype.multiplyToRef=function(t,r){return this._isIdentity?(r.copyFrom(t),this):t._isIdentity?(r.copyFrom(this),this):(this.multiplyToArray(t,r._m,0),r.markAsUpdated(),this)},t.prototype.multiplyToArray=function(t,r,e){var i=this._m,o=t.m,n=i[0],s=i[1],a=i[2],u=i[3],h=i[4],f=i[5],c=i[6],y=i[7],p=i[8],l=i[9],_=i[10],x=i[11],d=i[12],m=i[13],v=i[14],w=i[15],R=o[0],z=o[1],T=o[2],F=o[3],g=o[4],M=o[5],b=o[6],I=o[7],P=o[8],V=o[9],A=o[10],D=o[11],S=o[12],C=o[13],k=o[14],L=o[15];return r[e]=n*R+s*g+a*P+u*S,r[e+1]=n*z+s*M+a*V+u*C,r[e+2]=n*T+s*b+a*A+u*k,r[e+3]=n*F+s*I+a*D+u*L,r[e+4]=h*R+f*g+c*P+y*S,r[e+5]=h*z+f*M+c*V+y*C,r[e+6]=h*T+f*b+c*A+y*k,r[e+7]=h*F+f*I+c*D+y*L,r[e+8]=p*R+l*g+_*P+x*S,r[e+9]=p*z+l*M+_*V+x*C,r[e+10]=p*T+l*b+_*A+x*k,r[e+11]=p*F+l*I+_*D+x*L,r[e+12]=d*R+m*g+v*P+w*S,r[e+13]=d*z+m*M+v*V+w*C,r[e+14]=d*T+m*b+v*A+w*k,r[e+15]=d*F+m*I+v*D+w*L,this},t.prototype.equals=function(t){var r=t;if(!r)return!1;if((this._isIdentity||r._isIdentity)&&!this._isIdentityDirty&&!r._isIdentityDirty)return this._isIdentity&&r._isIdentity;var e=this.m,i=r.m;return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]&&e[6]===i[6]&&e[7]===i[7]&&e[8]===i[8]&&e[9]===i[9]&&e[10]===i[10]&&e[11]===i[11]&&e[12]===i[12]&&e[13]===i[13]&&e[14]===i[14]&&e[15]===i[15]},t.prototype.clone=function(){var r=new t;return r.copyFrom(this),r},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var t=H(this._m[0]),r=1;r<16;r++)t=397*t^H(this._m[r]);return t},t.prototype.decomposeToTransformNode=function(t){return t.rotationQuaternion=t.rotationQuaternion||new Z,this.decompose(t.scaling,t.rotationQuaternion,t.position)},t.prototype.decompose=function(r,e,i,o){if(this._isIdentity)return i&&i.setAll(0),r&&r.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;var n=this._m;if(i&&i.copyFromFloats(n[12],n[13],n[14]),(r=r||E.Vector3[0]).x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),r.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),r.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),o){var s=o.scaling.x<0?-1:1,a=o.scaling.y<0?-1:1,u=o.scaling.z<0?-1:1;r.x*=s,r.y*=a,r.z*=u}else this.determinant()<=0&&(r.y*=-1);if(0===r._x||0===r._y||0===r._z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){var h=1/r._x,f=1/r._y,c=1/r._z;t.FromValuesToRef(n[0]*h,n[1]*h,n[2]*h,0,n[4]*f,n[5]*f,n[6]*f,0,n[8]*c,n[9]*c,n[10]*c,0,0,0,0,1,E.Matrix[0]),Z.FromRotationMatrixToRef(E.Matrix[0],e)}return!0},t.prototype.getRow=function(t){if(t<0||t>3)return null;var r=4*t;return new q(this._m[r+0],this._m[r+1],this._m[r+2],this._m[r+3])},t.prototype.setRow=function(t,r){return this.setRowFromFloats(t,r.x,r.y,r.z,r.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(r){return t.TransposeToRef(this,r),this},t.prototype.setRowFromFloats=function(t,r,e,i,o){if(t<0||t>3)return this;var n=4*t;return this._m[n+0]=r,this._m[n+1]=e,this._m[n+2]=i,this._m[n+3]=o,this.markAsUpdated(),this},t.prototype.scale=function(r){var e=new t;return this.scaleToRef(r,e),e},t.prototype.scaleToRef=function(t,r){for(var e=0;e<16;e++)r._m[e]=this._m[e]*t;return r.markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(t,r){for(var e=0;e<16;e++)r._m[e]+=this._m[e]*t;return r.markAsUpdated(),this},t.prototype.toNormalMatrix=function(r){var e=E.Matrix[0];this.invertToRef(e),e.transposeToRef(r);var i=r._m;t.FromValuesToRef(i[0],i[1],i[2],0,i[4],i[5],i[6],0,i[8],i[9],i[10],0,0,0,0,1,r)},t.prototype.getRotationMatrix=function(){var r=new t;return this.getRotationMatrixToRef(r),r},t.prototype.getRotationMatrixToRef=function(r){var e=E.Vector3[0];if(!this.decompose(e))return t.IdentityToRef(r),this;var i=this._m,o=1/e._x,n=1/e._y,s=1/e._z;return t.FromValuesToRef(i[0]*o,i[1]*o,i[2]*o,0,i[4]*n,i[5]*n,i[6]*n,0,i[8]*s,i[9]*s,i[10]*s,0,0,0,0,1,r),this},t.prototype.toggleModelMatrixHandInPlace=function(){var t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated()},t.FromArray=function(r,e){void 0===e&&(e=0);var i=new t;return t.FromArrayToRef(r,e,i),i},t.FromArrayToRef=function(t,r,e){for(var i=0;i<16;i++)e._m[i]=t[i+r];e.markAsUpdated()},t.FromFloat32ArrayToRefScaled=function(t,r,e,i){for(var o=0;o<16;o++)i._m[o]=t[o+r]*e;i.markAsUpdated()},Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._IdentityReadOnly},enumerable:!1,configurable:!0}),t.FromValuesToRef=function(t,r,e,i,o,n,s,a,u,h,f,c,y,p,l,_,x){var d=x._m;d[0]=t,d[1]=r,d[2]=e,d[3]=i,d[4]=o,d[5]=n,d[6]=s,d[7]=a,d[8]=u,d[9]=h,d[10]=f,d[11]=c,d[12]=y,d[13]=p,d[14]=l,d[15]=_,x.markAsUpdated()},t.FromValues=function(r,e,i,o,n,s,a,u,h,f,c,y,p,l,_,x){var d=new t,m=d._m;return m[0]=r,m[1]=e,m[2]=i,m[3]=o,m[4]=n,m[5]=s,m[6]=a,m[7]=u,m[8]=h,m[9]=f,m[10]=c,m[11]=y,m[12]=p,m[13]=l,m[14]=_,m[15]=x,d.markAsUpdated(),d},t.Compose=function(r,e,i){var o=new t;return t.ComposeToRef(r,e,i,o),o},t.ComposeToRef=function(t,r,e,i){var o=i._m,n=r._x,s=r._y,a=r._z,u=r._w,h=n+n,f=s+s,c=a+a,y=n*h,p=n*f,l=n*c,_=s*f,x=s*c,d=a*c,m=u*h,v=u*f,w=u*c,R=t._x,z=t._y,T=t._z;o[0]=(1-(_+d))*R,o[1]=(p+w)*R,o[2]=(l-v)*R,o[3]=0,o[4]=(p-w)*z,o[5]=(1-(y+d))*z,o[6]=(x+m)*z,o[7]=0,o[8]=(l+v)*T,o[9]=(x-m)*T,o[10]=(1-(y+_))*T,o[11]=0,o[12]=e._x,o[13]=e._y,o[14]=e._z,o[15]=1,i.markAsUpdated()},t.Identity=function(){var r=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return r._updateIdentityStatus(!0),r},t.IdentityToRef=function(r){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,r),r._updateIdentityStatus(!0)},t.Zero=function(){var r=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return r._updateIdentityStatus(!1),r},t.RotationX=function(r){var e=new t;return t.RotationXToRef(r,e),e},t.Invert=function(r){var e=new t;return r.invertToRef(e),e},t.RotationXToRef=function(r,e){var i=Math.sin(r),o=Math.cos(r);t.FromValuesToRef(1,0,0,0,0,o,i,0,0,-i,o,0,0,0,0,1,e),e._updateIdentityStatus(1===o&&0===i)},t.RotationY=function(r){var e=new t;return t.RotationYToRef(r,e),e},t.RotationYToRef=function(r,e){var i=Math.sin(r),o=Math.cos(r);t.FromValuesToRef(o,0,-i,0,0,1,0,0,i,0,o,0,0,0,0,1,e),e._updateIdentityStatus(1===o&&0===i)},t.RotationZ=function(r){var e=new t;return t.RotationZToRef(r,e),e},t.RotationZToRef=function(r,e){var i=Math.sin(r),o=Math.cos(r);t.FromValuesToRef(o,i,0,0,-i,o,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===o&&0===i)},t.RotationAxis=function(r,e){var i=new t;return t.RotationAxisToRef(r,e,i),i},t.RotationAxisToRef=function(t,r,e){var i=Math.sin(-r),o=Math.cos(-r),n=1-o;t.normalize();var s=e._m;s[0]=t._x*t._x*n+o,s[1]=t._x*t._y*n-t._z*i,s[2]=t._x*t._z*n+t._y*i,s[3]=0,s[4]=t._y*t._x*n+t._z*i,s[5]=t._y*t._y*n+o,s[6]=t._y*t._z*n-t._x*i,s[7]=0,s[8]=t._z*t._x*n-t._y*i,s[9]=t._z*t._y*n+t._x*i,s[10]=t._z*t._z*n+o,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,e.markAsUpdated()},t.RotationAlignToRef=function(t,r,e){var i=N.Dot(r,t),o=e._m;if(i<-.999)o[0]=-1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0;else{var n=N.Cross(r,t),s=1/(1+i);o[0]=n._x*n._x*s+i,o[1]=n._y*n._x*s-n._z,o[2]=n._z*n._x*s+n._y,o[3]=0,o[4]=n._x*n._y*s+n._z,o[5]=n._y*n._y*s+i,o[6]=n._z*n._y*s-n._x,o[7]=0,o[8]=n._x*n._z*s-n._y,o[9]=n._y*n._z*s+n._x,o[10]=n._z*n._z*s+i,o[11]=0}o[12]=0,o[13]=0,o[14]=0,o[15]=1,e.markAsUpdated()},t.RotationYawPitchRoll=function(r,e,i){var o=new t;return t.RotationYawPitchRollToRef(r,e,i,o),o},t.RotationYawPitchRollToRef=function(t,r,e,i){Z.RotationYawPitchRollToRef(t,r,e,E.Quaternion[0]),E.Quaternion[0].toRotationMatrix(i)},t.Scaling=function(r,e,i){var o=new t;return t.ScalingToRef(r,e,i,o),o},t.ScalingToRef=function(r,e,i,o){t.FromValuesToRef(r,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1,o),o._updateIdentityStatus(1===r&&1===e&&1===i)},t.Translation=function(r,e,i){var o=new t;return t.TranslationToRef(r,e,i,o),o},t.TranslationToRef=function(r,e,i,o){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,r,e,i,1,o),o._updateIdentityStatus(0===r&&0===e&&0===i)},t.Lerp=function(r,e,i){var o=new t;return t.LerpToRef(r,e,i,o),o},t.LerpToRef=function(t,r,e,i){for(var o=i._m,n=t.m,s=r.m,a=0;a<16;a++)o[a]=n[a]*(1-e)+s[a]*e;i.markAsUpdated()},t.DecomposeLerp=function(r,e,i){var o=new t;return t.DecomposeLerpToRef(r,e,i,o),o},t.DecomposeLerpToRef=function(r,e,i,o){var n=E.Vector3[0],s=E.Quaternion[0],a=E.Vector3[1];r.decompose(n,s,a);var u=E.Vector3[2],h=E.Quaternion[1],f=E.Vector3[3];e.decompose(u,h,f);var c=E.Vector3[4];N.LerpToRef(n,u,i,c);var y=E.Quaternion[2];Z.SlerpToRef(s,h,i,y);var p=E.Vector3[5];N.LerpToRef(a,f,i,p),t.ComposeToRef(c,y,p,o)},t.LookAtLH=function(r,e,i){var o=new t;return t.LookAtLHToRef(r,e,i,o),o},t.LookAtLHToRef=function(r,e,i,o){var n=E.Vector3[0],s=E.Vector3[1],a=E.Vector3[2];e.subtractToRef(r,a),a.normalize(),N.CrossToRef(i,a,n);var u=n.lengthSquared();0===u?n.x=1:n.normalizeFromLength(Math.sqrt(u)),N.CrossToRef(a,n,s),s.normalize();var h=-N.Dot(n,r),f=-N.Dot(s,r),c=-N.Dot(a,r);t.FromValuesToRef(n._x,s._x,a._x,0,n._y,s._y,a._y,0,n._z,s._z,a._z,0,h,f,c,1,o)},t.LookAtRH=function(r,e,i){var o=new t;return t.LookAtRHToRef(r,e,i,o),o},t.LookAtRHToRef=function(r,e,i,o){var n=E.Vector3[0],s=E.Vector3[1],a=E.Vector3[2];r.subtractToRef(e,a),a.normalize(),N.CrossToRef(i,a,n);var u=n.lengthSquared();0===u?n.x=1:n.normalizeFromLength(Math.sqrt(u)),N.CrossToRef(a,n,s),s.normalize();var h=-N.Dot(n,r),f=-N.Dot(s,r),c=-N.Dot(a,r);t.FromValuesToRef(n._x,s._x,a._x,0,n._y,s._y,a._y,0,n._z,s._z,a._z,0,h,f,c,1,o)},t.LookDirectionLH=function(r,e){var i=new t;return t.LookDirectionLHToRef(r,e,i),i},t.LookDirectionLHToRef=function(r,e,i){var o=E.Vector3[0];o.copyFrom(r),o.scaleInPlace(-1);var n=E.Vector3[1];N.CrossToRef(e,o,n),t.FromValuesToRef(n._x,n._y,n._z,0,e._x,e._y,e._z,0,o._x,o._y,o._z,0,0,0,0,1,i)},t.LookDirectionRH=function(r,e){var i=new t;return t.LookDirectionRHToRef(r,e,i),i},t.LookDirectionRHToRef=function(r,e,i){var o=E.Vector3[2];N.CrossToRef(e,r,o),t.FromValuesToRef(o._x,o._y,o._z,0,e._x,e._y,e._z,0,r._x,r._y,r._z,0,0,0,0,1,i)},t.OrthoLH=function(r,e,i,o,n){var s=new t;return t.OrthoLHToRef(r,e,i,o,s,n),s},t.OrthoLHToRef=function(r,e,i,o,n,s){var a=2/r,u=2/e,h=2/(o-i),f=-(o+i)/(o-i);t.FromValuesToRef(a,0,0,0,0,u,0,0,0,0,h,0,0,0,f,1,n),s&&n.multiplyToRef(Q,n),n._updateIdentityStatus(1===a&&1===u&&1===h&&0===f)},t.OrthoOffCenterLH=function(r,e,i,o,n,s,a){var u=new t;return t.OrthoOffCenterLHToRef(r,e,i,o,n,s,u,a),u},t.OrthoOffCenterLHToRef=function(r,e,i,o,n,s,a,u){var h=2/(e-r),f=2/(o-i),c=2/(s-n),y=-(s+n)/(s-n),p=(r+e)/(r-e),l=(o+i)/(i-o);t.FromValuesToRef(h,0,0,0,0,f,0,0,0,0,c,0,p,l,y,1,a),u&&a.multiplyToRef(Q,a),a.markAsUpdated()},t.OrthoOffCenterRH=function(r,e,i,o,n,s,a){var u=new t;return t.OrthoOffCenterRHToRef(r,e,i,o,n,s,u,a),u},t.OrthoOffCenterRHToRef=function(r,e,i,o,n,s,a,u){t.OrthoOffCenterLHToRef(r,e,i,o,n,s,a,u),a._m[10]*=-1},t.PerspectiveLH=function(r,e,i,o,n,s){void 0===s&&(s=0);var a=new t,u=2*i/r,h=2*i/e,f=(o+i)/(o-i),c=-2*o*i/(o-i),y=Math.tan(s);return t.FromValuesToRef(u,0,0,0,0,h,0,y,0,0,f,1,0,0,c,0,a),n&&a.multiplyToRef(Q,a),a._updateIdentityStatus(!1),a},t.PerspectiveFovLH=function(r,e,i,o,n,s,a){void 0===s&&(s=0),void 0===a&&(a=!1);var u=new t;return t.PerspectiveFovLHToRef(r,e,i,o,u,!0,n,s,a),u},t.PerspectiveFovLHToRef=function(r,e,i,o,n,s,a,u,h){void 0===s&&(s=!0),void 0===u&&(u=0),void 0===h&&(h=!1);var f=i,c=o,y=1/Math.tan(.5*r),p=s?y/e:y,l=s?y:y*e,_=h&&0===f?-1:0!==c?(c+f)/(c-f):1,x=h&&0===f?2*c:0!==c?-2*c*f/(c-f):-2*f,d=Math.tan(u);t.FromValuesToRef(p,0,0,0,0,l,0,d,0,0,_,1,0,0,x,0,n),a&&n.multiplyToRef(Q,n),n._updateIdentityStatus(!1)},t.PerspectiveFovReverseLHToRef=function(r,e,i,o,n,s,a,u){void 0===s&&(s=!0),void 0===u&&(u=0);var h=1/Math.tan(.5*r),f=s?h/e:h,c=s?h:h*e,y=Math.tan(u);t.FromValuesToRef(f,0,0,0,0,c,0,y,0,0,-i,1,0,0,1,0,n),a&&n.multiplyToRef(Q,n),n._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(r,e,i,o,n,s,a){void 0===s&&(s=0),void 0===a&&(a=!1);var u=new t;return t.PerspectiveFovRHToRef(r,e,i,o,u,!0,n,s,a),u},t.PerspectiveFovRHToRef=function(r,e,i,o,n,s,a,u,h){void 0===s&&(s=!0),void 0===u&&(u=0),void 0===h&&(h=!1);var f=i,c=o,y=1/Math.tan(.5*r),p=s?y/e:y,l=s?y:y*e,_=h&&0===f?1:0!==c?-(c+f)/(c-f):-1,x=h&&0===f?2*c:0!==c?-2*c*f/(c-f):-2*f,d=Math.tan(u);t.FromValuesToRef(p,0,0,0,0,l,0,d,0,0,_,-1,0,0,x,0,n),a&&n.multiplyToRef(Q,n),n._updateIdentityStatus(!1)},t.PerspectiveFovReverseRHToRef=function(r,e,i,o,n,s,a,u){void 0===s&&(s=!0),void 0===u&&(u=0);var h=1/Math.tan(.5*r),f=s?h/e:h,c=s?h:h*e,y=Math.tan(u);t.FromValuesToRef(f,0,0,0,0,c,0,y,0,0,-i,-1,0,0,-1,0,n),a&&n.multiplyToRef(Q,n),n._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(t,r,e,i,o,n,s){void 0===o&&(o=!1),void 0===s&&(s=0);var a=o?-1:1,u=Math.tan(t.upDegrees*Math.PI/180),h=Math.tan(t.downDegrees*Math.PI/180),f=Math.tan(t.leftDegrees*Math.PI/180),c=Math.tan(t.rightDegrees*Math.PI/180),y=2/(f+c),p=2/(u+h),l=Math.tan(s),_=i._m;_[0]=y,_[1]=_[2]=_[3]=_[4]=0,_[5]=p,_[6]=0,_[7]=l,_[8]=(f-c)*y*.5,_[9]=-(u-h)*p*.5,_[10]=-e/(r-e),_[11]=1*a,_[12]=_[13]=_[15]=0,_[14]=-2*e*r/(e-r),n&&i.multiplyToRef(Q,i),i.markAsUpdated()},t.GetFinalMatrix=function(r,e,i,o,n,s){var a=r.width,u=r.height,h=r.x,f=r.y,c=t.FromValues(a/2,0,0,0,0,-u/2,0,0,0,0,s-n,0,h+a/2,u/2+f,n,1),y=E.Matrix[0];return e.multiplyToRef(i,y),y.multiplyToRef(o,y),y.multiply(c)},t.GetAsMatrix2x2=function(t){var r=t.m,e=[r[0],r[1],r[4],r[5]];return B.MatrixUse64Bits?e:new Float32Array(e)},t.GetAsMatrix3x3=function(t){var r=t.m,e=[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]];return B.MatrixUse64Bits?e:new Float32Array(e)},t.Transpose=function(r){var e=new t;return t.TransposeToRef(r,e),e},t.TransposeToRef=function(t,r){var e=r._m,i=t.m;e[0]=i[0],e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=i[1],e[5]=i[5],e[6]=i[9],e[7]=i[13],e[8]=i[2],e[9]=i[6],e[10]=i[10],e[11]=i[14],e[12]=i[3],e[13]=i[7],e[14]=i[11],e[15]=i[15],r.markAsUpdated(),r._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)},t.Reflection=function(r){var e=new t;return t.ReflectionToRef(r,e),e},t.ReflectionToRef=function(r,e){r.normalize();var i=r.normal.x,o=r.normal.y,n=r.normal.z,s=-2*i,a=-2*o,u=-2*n;t.FromValuesToRef(s*i+1,a*i,u*i,0,s*o,a*o+1,u*o,0,s*n,a*n,u*n+1,0,s*r.d,a*r.d,u*r.d,1,e)},t.FromXYZAxesToRef=function(r,e,i,o){t.FromValuesToRef(r._x,r._y,r._z,0,e._x,e._y,e._z,0,i._x,i._y,i._z,0,0,0,0,1,o)},t.FromQuaternionToRef=function(t,r){var e=t._x*t._x,i=t._y*t._y,o=t._z*t._z,n=t._x*t._y,s=t._z*t._w,a=t._z*t._x,u=t._y*t._w,h=t._y*t._z,f=t._x*t._w;r._m[0]=1-2*(i+o),r._m[1]=2*(n+s),r._m[2]=2*(a-u),r._m[3]=0,r._m[4]=2*(n-s),r._m[5]=1-2*(o+e),r._m[6]=2*(h+f),r._m[7]=0,r._m[8]=2*(a+u),r._m[9]=2*(h-f),r._m[10]=1-2*(i+e),r._m[11]=0,r._m[12]=0,r._m[13]=0,r._m[14]=0,r._m[15]=1,r.markAsUpdated()},t._UpdateFlagSeed=0,t._IdentityReadOnly=t.Identity(),t}(),E=function(){function t(){}return t.Vector3=L.BuildTuple(11,N.Zero),t.Matrix=L.BuildTuple(2,j.Identity),t.Quaternion=L.BuildTuple(3,Z.Zero),t}(),W=function(){function t(){}return t.Vector2=L.BuildTuple(3,U.Zero),t.Vector3=L.BuildTuple(13,N.Zero),t.Vector4=L.BuildTuple(3,q.Zero),t.Quaternion=L.BuildTuple(2,Z.Zero),t.Matrix=L.BuildTuple(8,j.Identity),t}(),Q=j.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);self.onmessage=async t=>{const e=t.data;let i={};const o=await fetch(e),n=await o.blob(),s=new r(await n.arrayBuffer()),a=new C(s);for(const[t,r]of Object.entries(a.layers)){i[t]=[];for(let e=0;e<r.length;++e){const o=r.feature(e);if(3===o.type){const r=o.loadGeometry(),e=o.extent;i[t].push({type:o.type,v2:r.map((t=>t.map((t=>new U(t.x/e,-t.y/e))))),v3:[]})}else if(2===o.type){const r=o.loadGeometry(),e=o.extent;i[t].push({type:o.type,v2:[],v3:r.map((t=>t.map((t=>new N(t.x/e,0,-t.y/e)))))})}}}postMessage(i),close()};
